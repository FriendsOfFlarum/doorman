{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/doorman/webpack/bootstrap","webpack://@fof/doorman/webpack/runtime/compat get default export","webpack://@fof/doorman/webpack/runtime/define property getters","webpack://@fof/doorman/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/doorman/webpack/runtime/make namespace object","webpack://@fof/doorman/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/doorman/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/doorman/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/doorman/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@fof/doorman/./src/admin/models/Doorkey.js","webpack://@fof/doorman/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/doorman/./src/admin/components/InviteCodeModal.js","webpack://@fof/doorman/./src/admin/components/DoormanSettingsListItem.js","webpack://@fof/doorman/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/doorman/./src/admin/components/SettingsPage.js","webpack://@fof/doorman/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Doorkey extends mixin(Model, {\n  key: Model.attribute('key'),\n  groupId: Model.attribute('groupId'),\n  maxUses: Model.attribute('maxUses'),\n  uses: Model.attribute('uses'),\n  activates: Model.attribute('activates'),\n}) {\n  apiEndpoint() {\n    return `/fof/doorkeys${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/admin/app';\nimport Alert from 'flarum/common/components/Alert';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class InviteCodeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.emails = [];\n\n    this.doorkey = this.attrs.doorkey;\n\n    this.success = false;\n  }\n\n  className() {\n    return 'InviteCodeModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('fof-doorman.admin.modal.title');\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    $('#EmailInput')\n      .off()\n      .on('keydown', (e) => {\n        if (e.keyCode === 13 || e.keyCode === 188 || e.keyCode === 32) {\n          e.preventDefault();\n          this.addEmails();\n        }\n      });\n  }\n\n  onremove(vnode) {\n    super.onremove(vnode);\n    app.alerts.dismiss(this.alert);\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <h3>\n          {app.translator.trans('fof-doorman.admin.modal.group', {\n            group: app.store.getById('groups', this.doorkey.groupId()).nameSingular(),\n          })}\n        </h3>\n        <div className=\"helpText\">{app.translator.trans('fof-doorman.admin.modal.help')}</div>\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <input\n              type=\"text\"\n              name=\"text\"\n              id=\"EmailInput\"\n              className=\"FormControl\"\n              placeholder={app.translator.trans('fof-doorman.admin.modal.placeholder')}\n              disabled={this.loading}\n            />\n          </div>\n          <div className=\"Form-group\">\n            <ul>\n              {this.emails.map((email, i) => {\n                return (\n                  <li className=\"emailListItem\">\n                    <p>{email}</p>\n                    {Button.component({\n                      className: 'Button',\n                      loading: this.loading,\n                      icon: 'fas fa-times',\n                      onclick: this.removeEmail.bind(this, i),\n                    })}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n          <div className=\"Form-group\">\n            {Button.component(\n              {\n                className: 'Button Button--primary Button--block',\n                loading: this.loading,\n                onclick: this.send.bind(this),\n                disabled: this.emails.length === 0,\n              },\n              app.translator.trans('fof-doorman.admin.modal.send')\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  addEmails() {\n    app.alerts.dismiss(this.alert);\n    m.redraw();\n    this.badEmails = [];\n\n    const value = $('#EmailInput').val();\n\n    value.split(/[ ,]+/).map((email) => {\n      if (!this.emails.includes(email)) {\n        const maxUses = this.doorkey.maxUses();\n        const uses = this.doorkey.uses();\n\n        if (maxUses > 0 && uses + this.emails.length + 1 > maxUses) {\n          this.alert = app.alerts.show(Alert, { type: 'error' }, app.translator.trans('fof-doorman.admin.modal.max_use_conflict'));\n          m.redraw();\n        } else {\n          if (this.validateEmail(email)) {\n            this.emails.push(email);\n            $('#EmailInput').val('');\n            m.redraw();\n          } else {\n            this.badEmails.push(email);\n            this.alert = app.alerts.show(\n              Alert,\n              { type: 'error' },\n              app.translator.trans('fof-doorman.admin.modal.invalid_emails', { emails: this.badEmails.join(', ') })\n            );\n            m.redraw();\n          }\n        }\n      }\n    });\n  }\n\n  validateEmail(email) {\n    const re =\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  }\n\n  removeEmail(i) {\n    this.emails.splice(i, 1);\n  }\n\n  send(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.alert);\n\n    this.loading = true;\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/fof/doorkeys/invites',\n        body: {\n          emails: this.emails,\n          doorkeyId: this.doorkey.data.id,\n        },\n      })\n      .then(() => {\n        app.modal.close();\n        this.alert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('fof-doorman.admin.modal.success'));\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Badge from 'flarum/common/components/Badge';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport Stream from 'flarum/common/utils/Stream';\nimport InviteCodeModal from './InviteCodeModal';\n\nexport default class DoormanSettingsListItem extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.doorkey = this.attrs.doorkey;\n\n    this.key = Stream(this.doorkey.key());\n    this.groupId = Stream(this.doorkey.groupId() || 3);\n    this.maxUses = Stream(this.doorkey.maxUses() || '0');\n    this.activates = Stream(!!this.doorkey.activates());\n  }\n\n  view() {\n    const maxUses = this.doorkey.maxUses();\n    const totalUses = this.doorkey.uses();\n    const remaining = maxUses - totalUses;\n\n    const formId = `fof-doorkey-${this.doorkey.id()}`;\n\n    return (\n      <tr className=\"DoormanSettingsListItem\">\n        <td>\n          <input\n            className=\"FormControl Doorkey-key\"\n            type=\"text\"\n            disabled\n            value={this.key()}\n            placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.key')}\n          />\n        </td>\n        <td>\n          {Select.component({\n            options: this.getGroupsForInput(),\n            className: 'Doorkey-select',\n            onchange: this.groupId,\n            value: this.groupId(),\n          })}\n        </td>\n        <td>\n          <input\n            className=\"FormControl Doorkey-maxUses\"\n            bidi={this.maxUses}\n            min=\"0\"\n            type=\"number\"\n            form={formId}\n            placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.max_uses')}\n          />\n        </td>\n        <td>\n          {Switch.component({\n            state: this.activates(),\n            onchange: this.activates,\n            className: 'Doorkey-switch',\n          })}\n        </td>\n\n        <td>\n          {Button.component({\n            type: 'button',\n            className: 'Button Button--icon Doorkey-button',\n            icon: 'fa fa-envelope fa-fw',\n            onclick: this.showModal.bind(this),\n          })}\n        </td>\n\n        <td>\n          <form id={formId}>\n            <div className=\"ButtonGroup Doorkey-button\">\n              {Button.component({\n                type: 'submit',\n                className: 'Button Button--icon',\n                icon: `fas ${this.loading ? 'fa-circle-notch fa-spin' : 'fa-save'} fa-fw`,\n                onclick: this.save.bind(this),\n                disabled: this.loading || this.loadingDelete,\n              })}\n\n              {Button.component({\n                type: 'button',\n                className: 'Button Button--danger Button--icon',\n                icon: `fas ${this.loadingDelete ? 'fa-circle-notch fa-spin' : 'fa-times'} fa-fw`,\n                onclick: this.delete.bind(this),\n                disabled: this.loadingDelete,\n              })}\n            </div>\n          </form>\n        </td>\n\n        <td>\n          {maxUses > 0 && totalUses >= maxUses ? (\n            Badge.component({\n              className: 'Button--icon Doorkey-badge',\n              icon: 'fas fa-user-slash',\n              label: app.translator.trans('fof-doorman.admin.page.doorkey.warning'),\n            })\n          ) : (\n            <b>\n              {remaining < 0\n                ? app.translator.trans('fof-doorman.admin.page.doorkey.total_uses', { totalUses })\n                : app.translator.trans('fof-doorman.admin.page.doorkey.used_times', { remaining })}\n            </b>\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  showModal() {\n    app.modal.show(InviteCodeModal, { doorkey: this.doorkey });\n  }\n\n  getGroupsForInput() {\n    let options = [];\n\n    app.store.all('groups').map((group) => {\n      if (group.nameSingular() === 'Guest') {\n        return;\n      }\n      options[group.id()] = group.nameSingular();\n    });\n\n    return options;\n  }\n\n  save(e) {\n    e?.preventDefault?.();\n\n    this.loading = true;\n\n    return this.doorkey\n      .save({\n        groupId: this.groupId(),\n        maxUses: this.maxUses(),\n        activates: this.activates(),\n      })\n      .finally(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  delete() {\n    this.loadingDelete = true;\n\n    this.doorkey.delete().finally(() => {\n      this.loadingDelete = false;\n      m.redraw();\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport DoormanSettingsListItem from './DoormanSettingsListItem';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport app from 'flarum/admin/app';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\n\nexport default class DoormanSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadingKeys = true;\n    this.isOptional = app.data.settings['fof-doorman.allowPublic'];\n\n    this.doorkey = {\n      key: Stream(this.generateRandomKey()),\n      groupId: Stream(3),\n      maxUses: Stream(10),\n      activates: Stream(false),\n    };\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.store.find('fof/doorkeys').then(() => {\n      this.loadingKeys = false;\n      m.redraw();\n    });\n  }\n\n  content() {\n    const doorkeys = app.store.all('doorkeys');\n\n    return (\n      <div className=\"container Doorkey-container\">\n        <div className=\"Doorkeys-title\">\n          <h2>{app.translator.trans('fof-doorman.admin.page.doorkey.title')}</h2>\n          <p className=\"helpText\">\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.key')} <br />\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.group')} <br />\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.max')} <br />\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.activates')} <br />\n          </p>\n        </div>\n\n        {this.loadingKeys ? (\n          <LoadingIndicator />\n        ) : (\n          <table className=\"Table\">\n            <thead>\n              <tr className=\"Doorkeys-fieldLabels\">\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.key')}</th>\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.group')}</th>\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.max_uses')}</th>\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.activate')}</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {doorkeys.map((doorkey) => (\n                <DoormanSettingsListItem doorkey={doorkey} doorkeys={doorkeys} />\n              ))}\n            </tbody>\n\n            <tfoot>\n              <tr className=\"Doorkeys-new\">\n                <td>\n                  <input\n                    className=\"FormControl Doorkey-key\"\n                    type=\"text\"\n                    value={this.doorkey.key()}\n                    placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.key')}\n                    oninput={withAttr('value', this.doorkey.key)}\n                    form=\"fof-doorkey-new\"\n                  />\n                </td>\n                <td>\n                  {Select.component({\n                    options: this.getGroupsForInput(),\n                    className: 'Doorkey-select',\n                    onchange: this.doorkey.groupId,\n                    value: this.doorkey.groupId(),\n                  })}\n                </td>\n                <td>\n                  <input\n                    className=\"FormControl Doorkey-maxUses\"\n                    value={this.doorkey.maxUses()}\n                    type=\"number\"\n                    placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.max_uses')}\n                    oninput={withAttr('value', this.doorkey.maxUses)}\n                    min=\"0\"\n                    form=\"fof-doorkey-new\"\n                  />\n                </td>\n                <td>\n                  {Switch.component({\n                    state: this.doorkey.activates() || false,\n                    onchange: this.doorkey.activates,\n                    className: 'Doorkey-switch',\n                  })}\n                </td>\n                <td>\n                  <form id=\"fof-doorkey-new\">\n                    {Button.component({\n                      type: 'submit',\n                      className: 'Button Button--icon Doorkey-button',\n                      icon: `fa ${this.loadingCreate ? 'fa-circle-notch fa-spin' : 'fa-plus'} fa-fw`,\n                      onclick: this.createDoorkey.bind(this),\n                      disabled: this.loadingCreate,\n                    })}\n                  </form>\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n        )}\n\n        <div className=\"Doorkey-allowPublic\">\n          <h2>{app.translator.trans('fof-doorman.admin.page.doorkey.allow-public.title')}</h2>\n          {this.buildSettingComponent({\n            type: 'boolean',\n            setting: 'fof-doorman.allowPublic',\n            label: app.translator.trans('fof-doorman.admin.page.doorkey.allow-public.switch-label'),\n          })}\n\n          {this.submitButton()}\n        </div>\n      </div>\n    );\n  }\n\n  getGroupsForInput() {\n    let options = [];\n\n    app.store.all('groups').map((group) => {\n      if (group.nameSingular() === 'Guest') {\n        return;\n      }\n      options[group.id()] = group.nameSingular();\n    });\n\n    return options;\n  }\n\n  generateRandomKey() {\n    return Array(8 + 1)\n      .join((Math.random().toString(36) + '00000000000000000').slice(2, 18))\n      .slice(0, 8);\n  }\n\n  createDoorkey(e) {\n    e?.preventDefault?.();\n\n    this.loadingCreate = true;\n\n    app.store\n      .createRecord('doorkeys')\n      .save({\n        key: this.doorkey.key(),\n        groupId: this.doorkey.groupId(),\n        maxUses: this.doorkey.maxUses(),\n        activates: this.doorkey.activates(),\n      })\n      .then(() => {\n        this.doorkey.key(this.generateRandomKey());\n        this.doorkey.groupId(3);\n        this.doorkey.maxUses(10);\n        this.doorkey.activates('');\n      })\n      .finally(() => {\n        this.loadingCreate = false;\n        m.redraw();\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport Doorkey from './models/Doorkey';\nimport SettingsPage from './components/SettingsPage';\n\napp.initializers.add('fof-doorman', () => {\n  app.store.models.doorkeys = Doorkey;\n\n  app.extensionData.for('fof-doorman').registerPage(SettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Doorkey","_mixin","apply","arguments","apiEndpoint","this","exists","data","id","mixin","Model","groupId","maxUses","uses","activates","InviteCodeModal","_Modal","_proto","oninit","vnode","emails","doorkey","attrs","success","className","title","app","trans","oncreate","_this","$","off","on","e","keyCode","preventDefault","addEmails","onremove","dismiss","alert","content","_this2","m","group","getById","nameSingular","type","name","placeholder","disabled","loading","map","email","i","Button","icon","onclick","removeEmail","bind","send","length","_this3","redraw","badEmails","val","split","includes","show","Alert","validateEmail","push","join","test","String","toLowerCase","splice","_this4","method","url","attribute","body","doorkeyId","then","close","Modal","DoormanSettingsListItem","_Component","Stream","view","totalUses","remaining","formId","Select","options","getGroupsForInput","onchange","bidi","min","form","Switch","state","showModal","save","loadingDelete","Badge","label","all","Component","DoormanSettingsPage","_ExtensionPage","loadingKeys","isOptional","settings","generateRandomKey","find","doorkeys","LoadingIndicator","oninput","withAttr","loadingCreate","createDoorkey","buildSettingComponent","setting","submitButton","Array","Math","random","toString","slice","createRecord","ExtensionPage","add","models","registerPage","SettingsPage"],"sourceRoot":""}