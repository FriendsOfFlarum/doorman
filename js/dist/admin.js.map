{"version":3,"file":"admin.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,a,aCAzC,SAASC,EAAgBhB,EAAGiB,GAMzC,OALAD,EAAkBf,OAAOiB,gBAAkB,SAAyBlB,EAAGiB,GAErE,OADAjB,EAAEmB,UAAYF,EACPjB,CACR,EAEMgB,EAAgBhB,EAAGiB,EAC3B,CCNc,SAASG,EAAeC,EAAUC,GAC/CD,EAASd,UAAYN,OAAOsB,OAAOD,EAAWf,WAC9Cc,EAASd,UAAUiB,YAAcH,EACjCH,EAAeG,EAAUC,EAC1B,CCLD,MAAM,EAA+BT,OAAOC,KAAKC,OAAO,gB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sB,ICGnCU,EAAAA,SAAAA,G,4EAOnBC,YAAA,WACE,uBAAuBC,KAAKC,OAAL,IAAkBD,KAAKE,KAAKC,GAAO,GAC3D,E,EATkBL,C,MAAgBM,GAAMC,IAAO,CAChDjC,IAAKiC,IAAAA,UAAgB,OACrBC,QAASD,IAAAA,UAAgB,WACzBE,QAASF,IAAAA,UAAgB,WACzBG,KAAMH,IAAAA,UAAgB,QACtBI,UAAWJ,IAAAA,UAAgB,gBCR7B,MAAM,EAA+BnB,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,2B,ICKnCsB,EAAAA,SAAAA,G,oFACnBC,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbZ,KAAKa,OAAS,GAEdb,KAAKc,QAAUd,KAAKe,MAAMD,QAE1Bd,KAAKgB,SAAU,CAChB,E,EAEDC,UAAA,WACE,MAAO,8BACR,E,EAEDC,MAAA,WACE,OAAOC,IAAAA,WAAeC,MAAM,gCAC7B,E,EAEDC,SAAA,SAAST,GAAO,WACd,YAAMS,SAAN,UAAeT,GACfU,EAAE,eACCC,MACAC,GAAG,WAAW,SAACC,GACI,KAAdA,EAAEC,SAAgC,MAAdD,EAAEC,SAAiC,KAAdD,EAAEC,UAC7CD,EAAEE,iBACF,EAAKC,YAER,GACJ,E,EAEDC,SAAA,SAASjB,GACP,YAAMiB,SAAN,UAAejB,GACfO,IAAAA,OAAWW,QAAQ9B,KAAK+B,MACzB,E,EAEDC,QAAA,WAAU,WACR,OACE,SAAKf,UAAU,cACb,YACGE,IAAAA,WAAeC,MAAM,gCAAiC,CACrDa,MAAOd,IAAAA,MAAUe,QAAQ,SAAUlC,KAAKc,QAAQR,WAAW6B,kBAG/D,SAAKlB,UAAU,YAAYE,IAAAA,WAAeC,MAAM,iCAChD,SAAKH,UAAU,uBACb,SAAKA,UAAU,cACb,WACEmB,KAAK,OACLC,KAAK,OACLlC,GAAG,aACHc,UAAU,cACVqB,YAAanB,IAAAA,WAAeC,MAAM,uCAClCmB,SAAUvC,KAAKwC,WAGnB,SAAKvB,UAAU,cACb,YACGjB,KAAKa,OAAO4B,KAAI,SAACC,EAAOC,GACvB,OACE,QAAI1B,UAAU,iBACZ,WAAIyB,GACHE,IAAAA,UAAiB,CAChB3B,UAAW,SACXuB,QAAS,EAAKA,QACdK,KAAM,eACNC,QAAS,EAAKC,YAAYC,KAAK,EAAML,KAI5C,MAGL,SAAK1B,UAAU,cACZ2B,IAAAA,UACC,CACE3B,UAAW,uCACXuB,QAASxC,KAAKwC,QACdM,QAAS9C,KAAKiD,KAAKD,KAAKhD,MACxBuC,SAAiC,IAAvBvC,KAAKa,OAAOqC,QAExB/B,IAAAA,WAAeC,MAAM,mCAMhC,E,EAEDQ,UAAA,WAAY,WACVT,IAAAA,OAAWW,QAAQ9B,KAAK+B,OACxBoB,EAAEC,SACFpD,KAAKqD,UAAY,GAEH/B,EAAE,eAAegC,MAEzBC,MAAM,SAASd,KAAI,SAACC,GACxB,IAAK,EAAK7B,OAAO2C,SAASd,GAAQ,CAChC,IAAMnC,EAAU,EAAKO,QAAQP,UACvBC,EAAO,EAAKM,QAAQN,OAEtBD,EAAU,GAAKC,EAAO,EAAKK,OAAOqC,OAAS,EAAI3C,GACjD,EAAKwB,MAAQZ,IAAAA,OAAWsC,KAAKC,IAAO,CAAEtB,KAAM,SAAWjB,IAAAA,WAAeC,MAAM,6CAC5E+B,EAAEC,UAEE,EAAKO,cAAcjB,IACrB,EAAK7B,OAAO+C,KAAKlB,GACjBpB,EAAE,eAAegC,IAAI,IACrBH,EAAEC,WAEF,EAAKC,UAAUO,KAAKlB,GACpB,EAAKX,MAAQZ,IAAAA,OAAWsC,KACtBC,IACA,CAAEtB,KAAM,SACRjB,IAAAA,WAAeC,MAAM,yCAA0C,CAAEP,OAAQ,EAAKwC,UAAUQ,KAAK,SAE/FV,EAAEC,SAGP,CACF,GACF,E,EAEDO,cAAA,SAAcjB,GAGZ,MADE,0JACQoB,KAAKC,OAAOrB,GAAOsB,cAC9B,E,EAEDjB,YAAA,SAAYJ,GACV3C,KAAKa,OAAOoD,OAAOtB,EAAG,EACvB,E,EAEDM,KAAA,SAAKxB,GAAG,WACNA,EAAEE,iBAEFR,IAAAA,OAAWW,QAAQ9B,KAAK+B,OAExB/B,KAAKwC,SAAU,EAEfrB,IAAAA,QACW,CACP+C,OAAQ,OACRC,IAAKhD,IAAAA,MAAUiD,UAAU,UAAY,wBACrCC,KAAM,CACJxD,OAAQb,KAAKa,OACbyD,UAAWtE,KAAKc,QAAQZ,KAAKC,MAGhCoE,MAAK,WACJpD,IAAAA,MAAUqD,QACV,EAAKzC,MAAQZ,IAAAA,OAAWsC,KAAKC,IAAO,CAAEtB,KAAM,WAAajB,IAAAA,WAAeC,MAAM,mCAC/E,GACJ,E,EAzJkBV,C,MAAwB+D,ICIxBC,EAAAA,SAAAA,G,oFACnB/D,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbZ,KAAKc,QAAUd,KAAKe,MAAMD,QAE1Bd,KAAK5B,IAAMuG,IAAO3E,KAAKc,QAAQ1C,OAC/B4B,KAAKM,QAAUqE,IAAO3E,KAAKc,QAAQR,WAAa,GAChDN,KAAKO,QAAUoE,IAAO3E,KAAKc,QAAQP,WAAa,KAChDP,KAAKS,UAAYkE,MAAS3E,KAAKc,QAAQL,YACxC,E,EAEDmE,KAAA,WACE,IAAMrE,EAAUP,KAAKc,QAAQP,UACvBsE,EAAY7E,KAAKc,QAAQN,OACzBsE,EAAYvE,EAAUsE,EAEtBE,EAAS,eAAe/E,KAAKc,QAAQX,KAE3C,OACE,QAAIc,UAAU,2BACZ,YACE,WACEA,UAAU,0BACVmB,KAAK,OACLG,UAAQ,EACRtD,MAAOe,KAAK5B,MACZkE,YAAanB,IAAAA,WAAeC,MAAM,yCAGtC,YACG4D,IAAAA,UAAiB,CAChBC,QAASjF,KAAKkF,oBACdjE,UAAW,iBACXkE,SAAUnF,KAAKM,QACfrB,MAAOe,KAAKM,aAGhB,YACE,WACEW,UAAU,8BACVmE,KAAMpF,KAAKO,QACX8E,IAAI,IACJjD,KAAK,SACLkD,KAAMP,EACNzC,YAAanB,IAAAA,WAAeC,MAAM,8CAGtC,YACGmE,IAAAA,UAAiB,CAChBC,MAAOxF,KAAKS,YACZ0E,SAAUnF,KAAKS,UACfQ,UAAW,oBAIf,YACG2B,IAAAA,UAAiB,CAChBR,KAAM,SACNnB,UAAW,qCACX4B,KAAM,uBACNC,QAAS9C,KAAKyF,UAAUzC,KAAKhD,SAIjC,YACE,UAAMG,GAAI4E,GACR,SAAK9D,UAAU,8BACZ2B,IAAAA,UAAiB,CAChBR,KAAM,SACNnB,UAAW,sBACX4B,KAAM,QAAO7C,KAAKwC,QAAU,0BAA4B,WAApD,SACJM,QAAS9C,KAAK0F,KAAK1C,KAAKhD,MACxBuC,SAAUvC,KAAKwC,SAAWxC,KAAK2F,gBAGhC/C,IAAAA,UAAiB,CAChBR,KAAM,SACNnB,UAAW,qCACX4B,KAAM,QAAO7C,KAAK2F,cAAgB,0BAA4B,YAA1D,SACJ7C,QAAS9C,KAAA,OAAYgD,KAAKhD,MAC1BuC,SAAUvC,KAAK2F,mBAMvB,YACGpF,EAAU,GAAKsE,GAAatE,EAC3BqF,IAAAA,UAAgB,CACd3E,UAAW,6BACX4B,KAAM,oBACNgD,MAAO1E,IAAAA,WAAeC,MAAM,4CAG9B,WACG0D,EAAY,EACT3D,IAAAA,WAAeC,MAAM,4CAA6C,CAAEyD,UAAAA,IACpE1D,IAAAA,WAAeC,MAAM,4CAA6C,CAAE0D,UAAAA,MAMnF,E,EAEDW,UAAA,WACEtE,IAAAA,MAAUsC,KAAK/C,EAAiB,CAAEI,QAASd,KAAKc,SACjD,E,EAEDoE,kBAAA,WACE,IAAID,EAAU,GASd,OAPA9D,IAAAA,MAAU2E,IAAI,UAAUrD,KAAI,SAACR,GACE,UAAzBA,EAAME,iBAGV8C,EAAQhD,EAAM9B,MAAQ8B,EAAME,eAC7B,IAEM8C,CACR,E,EAEDS,KAAA,SAAKjE,GAAG,WAKN,OAJC,MAADA,GAAA,MAAAA,EAAGE,gBAAHF,EAAGE,iBAEH3B,KAAKwC,SAAU,EAERxC,KAAKc,QACT4E,KAAK,CACJpF,QAASN,KAAKM,UACdC,QAASP,KAAKO,UACdE,UAAWT,KAAKS,cAJb,SAMI,WACP,EAAK+B,SAAU,EACfW,EAAEC,QACH,GACJ,E,SAED,WAAS,WACPpD,KAAK2F,eAAgB,EAErB3F,KAAKc,QAAL,kBAA8B,WAC5B,EAAK6E,eAAgB,EACrBxC,EAAEC,QACH,GACF,E,EAnJkBsB,CAAgCqB,KCTrD,MAAM,EAA+B7G,OAAOC,KAAKC,OAAO,yB,aCUnC4G,EAAAA,SAAAA,G,oFACnBrF,OAAA,SAAOC,GACL,YAAMD,OAAN,UAAaC,GAEbZ,KAAKiG,aAAc,EACnBjG,KAAKkG,WAAa/E,IAAAA,KAASgF,SAAS,2BAEpCnG,KAAKc,QAAU,CACb1C,IAAKuG,IAAO3E,KAAKoG,qBACjB9F,QAASqE,IAAO,GAChBpE,QAASoE,IAAO,IAChBlE,UAAWkE,KAAO,GAErB,E,EAEDtD,SAAA,SAAST,GAAO,WACd,YAAMS,SAAN,UAAeT,GAEfO,IAAAA,MAAUkF,KAAK,gBAAgB9B,MAAK,WAClC,EAAK0B,aAAc,EACnB9C,EAAEC,QACH,GACF,E,EAEDpB,QAAA,WACE,IAAMsE,EAAWnF,IAAAA,MAAU2E,IAAI,YAE/B,OACE,SAAK7E,UAAU,+BACb,SAAKA,UAAU,kBACb,YAAKE,IAAAA,WAAeC,MAAM,yCAC1B,OAAGH,UAAU,YACVE,IAAAA,WAAeC,MAAM,2CADxB,IACoE,aACjED,IAAAA,WAAeC,MAAM,6CAFxB,IAEsE,aACnED,IAAAA,WAAeC,MAAM,2CAHxB,IAGoE,aACjED,IAAAA,WAAeC,MAAM,iDAJxB,IAI0E,eAI3EpB,KAAKiG,YACJ,EAAC,IAAD,MAEA,WAAOhF,UAAU,SACf,eACE,QAAIA,UAAU,wBACZ,YAAKE,IAAAA,WAAeC,MAAM,+CAC1B,YAAKD,IAAAA,WAAeC,MAAM,iDAC1B,YAAKD,IAAAA,WAAeC,MAAM,oDAC1B,YAAKD,IAAAA,WAAeC,MAAM,sDAI9B,eACGkF,EAAS7D,KAAI,SAAC3B,GAAD,OACZ,EAAC4D,EAAD,CAAyB5D,QAASA,EAASwF,SAAUA,GADzC,KAKhB,eACE,QAAIrF,UAAU,gBACZ,YACE,WACEA,UAAU,0BACVmB,KAAK,OACLnD,MAAOe,KAAKc,QAAQ1C,MACpBkE,YAAanB,IAAAA,WAAeC,MAAM,sCAClCmF,QAASC,IAAS,QAASxG,KAAKc,QAAQ1C,KACxCkH,KAAK,qBAGT,YACGN,IAAAA,UAAiB,CAChBC,QAASjF,KAAKkF,oBACdjE,UAAW,iBACXkE,SAAUnF,KAAKc,QAAQR,QACvBrB,MAAOe,KAAKc,QAAQR,aAGxB,YACE,WACEW,UAAU,8BACVhC,MAAOe,KAAKc,QAAQP,UACpB6B,KAAK,SACLE,YAAanB,IAAAA,WAAeC,MAAM,2CAClCmF,QAASC,IAAS,QAASxG,KAAKc,QAAQP,SACxC8E,IAAI,IACJC,KAAK,qBAGT,YACGC,IAAAA,UAAiB,CAChBC,MAAOxF,KAAKc,QAAQL,cAAe,EACnC0E,SAAUnF,KAAKc,QAAQL,UACvBQ,UAAW,oBAGf,YACE,UAAMd,GAAG,mBACNyC,IAAAA,UAAiB,CAChBR,KAAM,SACNnB,UAAW,qCACX4B,KAAM,OAAM7C,KAAKyG,cAAgB,0BAA4B,WAAzD,SACJ3D,QAAS9C,KAAK0G,cAAc1D,KAAKhD,MACjCuC,SAAUvC,KAAKyG,qBAS7B,SAAKxF,UAAU,uBACb,YAAKE,IAAAA,WAAeC,MAAM,sDACzBpB,KAAK2G,sBAAsB,CAC1BvE,KAAM,UACNwE,QAAS,0BACTf,MAAO1E,IAAAA,WAAeC,MAAM,8DAG7BpB,KAAK6G,gBAIb,E,EAED3B,kBAAA,WACE,IAAID,EAAU,GASd,OAPA9D,IAAAA,MAAU2E,IAAI,UAAUrD,KAAI,SAACR,GACE,UAAzBA,EAAME,iBAGV8C,EAAQhD,EAAM9B,MAAQ8B,EAAME,eAC7B,IAEM8C,CACR,E,EAEDmB,kBAAA,WACE,OAAOU,MAAM,GACVjD,MAAMkD,KAAKC,SAASC,SAAS,IAAM,qBAAqBC,MAAM,EAAG,KACjEA,MAAM,EAAG,EACb,E,EAEDR,cAAA,SAAcjF,GAAG,WACd,MAADA,GAAA,MAAAA,EAAGE,gBAAHF,EAAGE,iBAEH3B,KAAKyG,eAAgB,EAErBtF,IAAAA,MACGgG,aAAa,YACbzB,KAAK,CACJtH,IAAK4B,KAAKc,QAAQ1C,MAClBkC,QAASN,KAAKc,QAAQR,UACtBC,QAASP,KAAKc,QAAQP,UACtBE,UAAWT,KAAKc,QAAQL,cAEzB8D,MAAK,WACJ,EAAKzD,QAAQ1C,IAAI,EAAKgI,qBACtB,EAAKtF,QAAQR,QAAQ,GACrB,EAAKQ,QAAQP,QAAQ,IACrB,EAAKO,QAAQL,UAAU,GACxB,IAbH,SAcW,WACP,EAAKgG,eAAgB,EACrBtD,EAAEC,QACH,GACJ,E,EAxKkB4C,CAA4BoB,KCNjDjG,IAAAA,aAAiBkG,IAAI,eAAe,WAClClG,IAAAA,MAAUmG,OAAOhB,SAAWxG,EAE5BqB,IAAAA,cAAA,IAAsB,eAAeoG,aAAaC,EACnD,G","sources":["webpack://@fof/doorman/webpack/bootstrap","webpack://@fof/doorman/webpack/runtime/compat get default export","webpack://@fof/doorman/webpack/runtime/define property getters","webpack://@fof/doorman/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/doorman/webpack/runtime/make namespace object","webpack://@fof/doorman/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/doorman/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/doorman/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/doorman/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@fof/doorman/./src/admin/models/Doorkey.js","webpack://@fof/doorman/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/doorman/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/doorman/./src/admin/components/InviteCodeModal.js","webpack://@fof/doorman/./src/admin/components/DoormanSettingsListItem.js","webpack://@fof/doorman/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/doorman/./src/admin/components/SettingsPage.js","webpack://@fof/doorman/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class Doorkey extends mixin(Model, {\n  key: Model.attribute('key'),\n  groupId: Model.attribute('groupId'),\n  maxUses: Model.attribute('maxUses'),\n  uses: Model.attribute('uses'),\n  activates: Model.attribute('activates'),\n}) {\n  apiEndpoint() {\n    return `/fof/doorkeys${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/admin/app';\nimport Alert from 'flarum/common/components/Alert';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\n\nexport default class InviteCodeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.emails = [];\n\n    this.doorkey = this.attrs.doorkey;\n\n    this.success = false;\n  }\n\n  className() {\n    return 'InviteCodeModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('fof-doorman.admin.modal.title');\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    $('#EmailInput')\n      .off()\n      .on('keydown', (e) => {\n        if (e.keyCode === 13 || e.keyCode === 188 || e.keyCode === 32) {\n          e.preventDefault();\n          this.addEmails();\n        }\n      });\n  }\n\n  onremove(vnode) {\n    super.onremove(vnode);\n    app.alerts.dismiss(this.alert);\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <h3>\n          {app.translator.trans('fof-doorman.admin.modal.group', {\n            group: app.store.getById('groups', this.doorkey.groupId()).nameSingular(),\n          })}\n        </h3>\n        <div className=\"helpText\">{app.translator.trans('fof-doorman.admin.modal.help')}</div>\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <input\n              type=\"text\"\n              name=\"text\"\n              id=\"EmailInput\"\n              className=\"FormControl\"\n              placeholder={app.translator.trans('fof-doorman.admin.modal.placeholder')}\n              disabled={this.loading}\n            />\n          </div>\n          <div className=\"Form-group\">\n            <ul>\n              {this.emails.map((email, i) => {\n                return (\n                  <li className=\"emailListItem\">\n                    <p>{email}</p>\n                    {Button.component({\n                      className: 'Button',\n                      loading: this.loading,\n                      icon: 'fas fa-times',\n                      onclick: this.removeEmail.bind(this, i),\n                    })}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n          <div className=\"Form-group\">\n            {Button.component(\n              {\n                className: 'Button Button--primary Button--block',\n                loading: this.loading,\n                onclick: this.send.bind(this),\n                disabled: this.emails.length === 0,\n              },\n              app.translator.trans('fof-doorman.admin.modal.send')\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  addEmails() {\n    app.alerts.dismiss(this.alert);\n    m.redraw();\n    this.badEmails = [];\n\n    const value = $('#EmailInput').val();\n\n    value.split(/[ ,]+/).map((email) => {\n      if (!this.emails.includes(email)) {\n        const maxUses = this.doorkey.maxUses();\n        const uses = this.doorkey.uses();\n\n        if (maxUses > 0 && uses + this.emails.length + 1 > maxUses) {\n          this.alert = app.alerts.show(Alert, { type: 'error' }, app.translator.trans('fof-doorman.admin.modal.max_use_conflict'));\n          m.redraw();\n        } else {\n          if (this.validateEmail(email)) {\n            this.emails.push(email);\n            $('#EmailInput').val('');\n            m.redraw();\n          } else {\n            this.badEmails.push(email);\n            this.alert = app.alerts.show(\n              Alert,\n              { type: 'error' },\n              app.translator.trans('fof-doorman.admin.modal.invalid_emails', { emails: this.badEmails.join(', ') })\n            );\n            m.redraw();\n          }\n        }\n      }\n    });\n  }\n\n  validateEmail(email) {\n    const re =\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  }\n\n  removeEmail(i) {\n    this.emails.splice(i, 1);\n  }\n\n  send(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.alert);\n\n    this.loading = true;\n\n    app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/fof/doorkeys/invites',\n        body: {\n          emails: this.emails,\n          doorkeyId: this.doorkey.data.id,\n        },\n      })\n      .then(() => {\n        app.modal.close();\n        this.alert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('fof-doorman.admin.modal.success'));\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Badge from 'flarum/common/components/Badge';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport Stream from 'flarum/common/utils/Stream';\nimport InviteCodeModal from './InviteCodeModal';\n\nexport default class DoormanSettingsListItem extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.doorkey = this.attrs.doorkey;\n\n    this.key = Stream(this.doorkey.key());\n    this.groupId = Stream(this.doorkey.groupId() || 3);\n    this.maxUses = Stream(this.doorkey.maxUses() || '0');\n    this.activates = Stream(!!this.doorkey.activates());\n  }\n\n  view() {\n    const maxUses = this.doorkey.maxUses();\n    const totalUses = this.doorkey.uses();\n    const remaining = maxUses - totalUses;\n\n    const formId = `fof-doorkey-${this.doorkey.id()}`;\n\n    return (\n      <tr className=\"DoormanSettingsListItem\">\n        <td>\n          <input\n            className=\"FormControl Doorkey-key\"\n            type=\"text\"\n            disabled\n            value={this.key()}\n            placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.key')}\n          />\n        </td>\n        <td>\n          {Select.component({\n            options: this.getGroupsForInput(),\n            className: 'Doorkey-select',\n            onchange: this.groupId,\n            value: this.groupId(),\n          })}\n        </td>\n        <td>\n          <input\n            className=\"FormControl Doorkey-maxUses\"\n            bidi={this.maxUses}\n            min=\"0\"\n            type=\"number\"\n            form={formId}\n            placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.max_uses')}\n          />\n        </td>\n        <td>\n          {Switch.component({\n            state: this.activates(),\n            onchange: this.activates,\n            className: 'Doorkey-switch',\n          })}\n        </td>\n\n        <td>\n          {Button.component({\n            type: 'button',\n            className: 'Button Button--icon Doorkey-button',\n            icon: 'fa fa-envelope fa-fw',\n            onclick: this.showModal.bind(this),\n          })}\n        </td>\n\n        <td>\n          <form id={formId}>\n            <div className=\"ButtonGroup Doorkey-button\">\n              {Button.component({\n                type: 'submit',\n                className: 'Button Button--icon',\n                icon: `fas ${this.loading ? 'fa-circle-notch fa-spin' : 'fa-save'} fa-fw`,\n                onclick: this.save.bind(this),\n                disabled: this.loading || this.loadingDelete,\n              })}\n\n              {Button.component({\n                type: 'button',\n                className: 'Button Button--danger Button--icon',\n                icon: `fas ${this.loadingDelete ? 'fa-circle-notch fa-spin' : 'fa-times'} fa-fw`,\n                onclick: this.delete.bind(this),\n                disabled: this.loadingDelete,\n              })}\n            </div>\n          </form>\n        </td>\n\n        <td>\n          {maxUses > 0 && totalUses >= maxUses ? (\n            Badge.component({\n              className: 'Button--icon Doorkey-badge',\n              icon: 'fas fa-user-slash',\n              label: app.translator.trans('fof-doorman.admin.page.doorkey.warning'),\n            })\n          ) : (\n            <b>\n              {remaining < 0\n                ? app.translator.trans('fof-doorman.admin.page.doorkey.total_uses', { totalUses })\n                : app.translator.trans('fof-doorman.admin.page.doorkey.used_times', { remaining })}\n            </b>\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  showModal() {\n    app.modal.show(InviteCodeModal, { doorkey: this.doorkey });\n  }\n\n  getGroupsForInput() {\n    let options = [];\n\n    app.store.all('groups').map((group) => {\n      if (group.nameSingular() === 'Guest') {\n        return;\n      }\n      options[group.id()] = group.nameSingular();\n    });\n\n    return options;\n  }\n\n  save(e) {\n    e?.preventDefault?.();\n\n    this.loading = true;\n\n    return this.doorkey\n      .save({\n        groupId: this.groupId(),\n        maxUses: this.maxUses(),\n        activates: this.activates(),\n      })\n      .finally(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  delete() {\n    this.loadingDelete = true;\n\n    this.doorkey.delete().finally(() => {\n      this.loadingDelete = false;\n      m.redraw();\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport DoormanSettingsListItem from './DoormanSettingsListItem';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport app from 'flarum/admin/app';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\n\nexport default class DoormanSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadingKeys = true;\n    this.isOptional = app.data.settings['fof-doorman.allowPublic'];\n\n    this.doorkey = {\n      key: Stream(this.generateRandomKey()),\n      groupId: Stream(3),\n      maxUses: Stream(10),\n      activates: Stream(false),\n    };\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.store.find('fof/doorkeys').then(() => {\n      this.loadingKeys = false;\n      m.redraw();\n    });\n  }\n\n  content() {\n    const doorkeys = app.store.all('doorkeys');\n\n    return (\n      <div className=\"container Doorkey-container\">\n        <div className=\"Doorkeys-title\">\n          <h2>{app.translator.trans('fof-doorman.admin.page.doorkey.title')}</h2>\n          <p className=\"helpText\">\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.key')} <br />\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.group')} <br />\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.max')} <br />\n            {app.translator.trans('fof-doorman.admin.page.doorkey.help.activates')} <br />\n          </p>\n        </div>\n\n        {this.loadingKeys ? (\n          <LoadingIndicator />\n        ) : (\n          <table className=\"Table\">\n            <thead>\n              <tr className=\"Doorkeys-fieldLabels\">\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.key')}</th>\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.group')}</th>\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.max_uses')}</th>\n                <th>{app.translator.trans('fof-doorman.admin.page.doorkey.heading.activate')}</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {doorkeys.map((doorkey) => (\n                <DoormanSettingsListItem doorkey={doorkey} doorkeys={doorkeys} />\n              ))}\n            </tbody>\n\n            <tfoot>\n              <tr className=\"Doorkeys-new\">\n                <td>\n                  <input\n                    className=\"FormControl Doorkey-key\"\n                    type=\"text\"\n                    value={this.doorkey.key()}\n                    placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.key')}\n                    oninput={withAttr('value', this.doorkey.key)}\n                    form=\"fof-doorkey-new\"\n                  />\n                </td>\n                <td>\n                  {Select.component({\n                    options: this.getGroupsForInput(),\n                    className: 'Doorkey-select',\n                    onchange: this.doorkey.groupId,\n                    value: this.doorkey.groupId(),\n                  })}\n                </td>\n                <td>\n                  <input\n                    className=\"FormControl Doorkey-maxUses\"\n                    value={this.doorkey.maxUses()}\n                    type=\"number\"\n                    placeholder={app.translator.trans('fof-doorman.admin.page.doorkey.max_uses')}\n                    oninput={withAttr('value', this.doorkey.maxUses)}\n                    min=\"0\"\n                    form=\"fof-doorkey-new\"\n                  />\n                </td>\n                <td>\n                  {Switch.component({\n                    state: this.doorkey.activates() || false,\n                    onchange: this.doorkey.activates,\n                    className: 'Doorkey-switch',\n                  })}\n                </td>\n                <td>\n                  <form id=\"fof-doorkey-new\">\n                    {Button.component({\n                      type: 'submit',\n                      className: 'Button Button--icon Doorkey-button',\n                      icon: `fa ${this.loadingCreate ? 'fa-circle-notch fa-spin' : 'fa-plus'} fa-fw`,\n                      onclick: this.createDoorkey.bind(this),\n                      disabled: this.loadingCreate,\n                    })}\n                  </form>\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n        )}\n\n        <div className=\"Doorkey-allowPublic\">\n          <h2>{app.translator.trans('fof-doorman.admin.page.doorkey.allow-public.title')}</h2>\n          {this.buildSettingComponent({\n            type: 'boolean',\n            setting: 'fof-doorman.allowPublic',\n            label: app.translator.trans('fof-doorman.admin.page.doorkey.allow-public.switch-label'),\n          })}\n\n          {this.submitButton()}\n        </div>\n      </div>\n    );\n  }\n\n  getGroupsForInput() {\n    let options = [];\n\n    app.store.all('groups').map((group) => {\n      if (group.nameSingular() === 'Guest') {\n        return;\n      }\n      options[group.id()] = group.nameSingular();\n    });\n\n    return options;\n  }\n\n  generateRandomKey() {\n    return Array(8 + 1)\n      .join((Math.random().toString(36) + '00000000000000000').slice(2, 18))\n      .slice(0, 8);\n  }\n\n  createDoorkey(e) {\n    e?.preventDefault?.();\n\n    this.loadingCreate = true;\n\n    app.store\n      .createRecord('doorkeys')\n      .save({\n        key: this.doorkey.key(),\n        groupId: this.doorkey.groupId(),\n        maxUses: this.doorkey.maxUses(),\n        activates: this.doorkey.activates(),\n      })\n      .then(() => {\n        this.doorkey.key(this.generateRandomKey());\n        this.doorkey.groupId(3);\n        this.doorkey.maxUses(10);\n        this.doorkey.activates('');\n      })\n      .finally(() => {\n        this.loadingCreate = false;\n        m.redraw();\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport Doorkey from './models/Doorkey';\nimport SettingsPage from './components/SettingsPage';\n\napp.initializers.add('fof-doorman', () => {\n  app.store.models.doorkeys = Doorkey;\n\n  app.extensionData.for('fof-doorman').registerPage(SettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Doorkey","apiEndpoint","this","exists","data","id","mixin","Model","groupId","maxUses","uses","activates","InviteCodeModal","oninit","vnode","emails","doorkey","attrs","success","className","title","app","trans","oncreate","$","off","on","e","keyCode","preventDefault","addEmails","onremove","dismiss","alert","content","group","getById","nameSingular","type","name","placeholder","disabled","loading","map","email","i","Button","icon","onclick","removeEmail","bind","send","length","m","redraw","badEmails","val","split","includes","show","Alert","validateEmail","push","join","test","String","toLowerCase","splice","method","url","attribute","body","doorkeyId","then","close","Modal","DoormanSettingsListItem","Stream","view","totalUses","remaining","formId","Select","options","getGroupsForInput","onchange","bidi","min","form","Switch","state","showModal","save","loadingDelete","Badge","label","all","Component","DoormanSettingsPage","loadingKeys","isOptional","settings","generateRandomKey","find","doorkeys","oninput","withAttr","loadingCreate","createDoorkey","buildSettingComponent","setting","submitButton","Array","Math","random","toString","slice","createRecord","ExtensionPage","add","models","registerPage","SettingsPage"],"sourceRoot":""}